{
  "1.25": {
    "(1)": "### 方法一 当 $r > n$ 时，$S = \\varnothing$，$\\binom{n+1}{r+1} = 0$，等式两侧均为 0，成立。下面只考虑 $r \\le n$ 的情况。 考虑 $S$ 中以 $k$ 为最小元的 $r$ 元子集（$k \\ge n-r+1$，否则这样的子集不存在），该子集中其余 $r-1$ 个元素需要从比 $k$ 大的 $n - k$ 个数中选择，有 $\\binom{n-k}{r-1}$ 种选法，即有 $\\binom{n-k}{r-1}$ 种以 $k$ 为最小元的 $r$ 元子集。故： $$ \\sum_{A \\in S} \\min{A} = \\sum_{k=1}^{n-r+1} k\\binom{n-k}{r-1} = \\sum_{k=1}^{n-r+1} \\binom{k}{1}\\binom{n-k}{r-1} $$ 考虑一个起点为 $(0,0)$、终点为 $(n-r,r+1)$ 的格路模型，我们可以将每条合法路径分为 $n-r+1$ 类，第 $k$ 类走了 $(k-1,1) \\to (k-1,2)$ 这条线段（$m \\in \\{1, 2, \\dots, n-r+1\\}$）。这种分法是完备且互斥的，满足加法原理。第 $k$ 类路径可以分为 $(0,0) \\to (k-1,1)$ 和 $(k-1,2) \\to (n-r,r+1)$ 两部分，后者可以视作起点为 $(0,0)$、终点为 $(n-k-r+1,r-1)$ 的新格路模型的合法路径数，故两部分路径数分别为 $\\binom{k}{1}$ 和 $\\binom{n-k}{r-1}$。由乘法原理和加法原理，原格路模型的合法路径数为： $$ \\sum_{k=1}^{n-r+1} \\binom{k}{1}\\binom{n-k}{r-1} = \\binom{n+1}{r+1} $$ 右式由直接计算格路模型的合法路径数得到，故原式得证。 ### 方法二 从方法一等到的结论 $\\sum_{A \\in S} \\min{A} = \\sum_{k=1}^{n-r+1} k\\binom{n-k}{r-1}$ 出发，反复使用组合恒等式裂项求和： $$ \\begin{aligned} \\sum_{A \\in S} \\min{A} &= \\sum_{k=1}^{n-r+1} k\\binom{n-k}{r-1} \\\\ &= \\sum_{k=1}^{n-r+1} k\\left[\\binom{n-k+1}{r} - \\binom{n-k}{r}\\right] \\\\ &= \\sum_{k=1}^{n-r+1} k\\binom{n-k+1}{r} - \\sum_{k=1}^{n-r+1} k\\binom{n-k}{r} \\\\ &= \\sum_{k=0}^{n-r} (k+1)\\binom{n-k}{r} - \\sum_{k=1}^{n-r+1} k\\binom{n-k}{r} \\\\ &= \\binom{n}{r} + \\sum_{k=1}^{n-r}\\binom{n-k}{r} - (n-r+1)\\binom{r-1}{r} \\\\ &= \\binom{n}{r} + \\sum_{k=1}^{n-r} \\left[\\binom{n-k+1}{r+1} - \\binom{n-k}{r+1}\\right] - 0 \\\\ &= \\binom{n}{r} + \\sum_{k=1}^{n-r}\\binom{n-k+1}{r+1} - \\sum_{k=1}^{n-r}\\binom{n-k}{r+1} \\\\ &= \\binom{n}{r} + \\sum_{k=0}^{n-r-1}\\binom{n-k}{r+1} - \\sum_{k=1}^{n-r}\\binom{n-k}{r+1} \\\\ &= \\binom{n}{r} + \\binom{n}{r+1} - \\binom{r}{r+1} \\\\ &= \\binom{n+1}{r+1} \\end{aligned} $$"
  },
  "1.26": {
    "(1)": "### 方法一 将 dog 视为单独一个字母，全部 $26-3+1 = 24$ 个字母的全排列方案数为 $P(24,24) = 24!$。根据 p、dog 和 q 的相对位置，可以将这些排列方案分成 $P(3,3) = 3!$ 组，每组方案数相同，但是只有满足 p dog q 顺序的组是合法的，所以最终结果需要除以 $3!$，即 $\\frac{24!}{3!}$。 ### 方法二 p、dog 和 q 将整个序列分成 4 个部分，将剩余的 $26-5=21$ 个字母视为等同，则该问题可以转化为一个 $n=4, r=21$ 的可重组合问题，其方案数为： $$ \\bar{C}(4, 21) = \\binom{4 + 21 - 1}{21} = \\binom{24}{21} = \\frac{24!}{21! \\cdot 3!} $$ 再将 21 个字母之间的区别纳入考虑，字母之间可以自由交换位置，产生 $21!$ 种不同的排列，所以最终的结果要乘以 $21!$，即 $\\frac{24!}{3!}$。 ### 方法三 将 p、dog 和 q 视为 3 个隔板，剩余的 $26-5=21$ 个不同的字母和 3 个相同的隔板构成一个多重集，该问题转化为一个多重全排列问题，方案数为： $$ \\frac{(21+3)!}{3!\\cdot\\prod_{k=1}^{21}1!} = \\frac{24!}{3!} $$"
  },
  "1.27": {
    "(1)": "### 方法一 将 a 与其后 3 个字母、b 与其后 5 个字母、c 与其后 7 个字母、d 与其后 9 个字母，以及字母 e 这 5 个部分分别视为整体，这 5 个整体将序列划分为 6 个部分。将剩余的 $19 \\cdot 5 - (3+5+7+9) = 71$ 个字母视为等同，则该问题转化为一个 $n=6,r=71$ 的可重组合问题，其方案数为： $$ \\bar{C}(6,71) = \\binom{6+71-1}{71} = \\binom{76}{71} = \\frac{76!}{71! \\cdot 5!} $$ 再将 f g h i j 这 5 种字母之间的区别纳入考虑，字母之间可以自由交换位置，不同的排列方法是一个多重全排列问题，方案数为： $$ \\frac{(19 \\cdot 5)!}{19!^5} = \\frac{95!}{19!^5} $$ 故最终的结果为： $$ \\frac{76! \\cdot 95!}{5! \\cdot 19!^5 \\cdot 71!} $$ ### 方法二（本质与方法一相同） a b c d e 这 5 个字母将序列划分为 6 个部分，不考虑其余 $19 \\cdot 5 = 95$ 个字母之间的区别，该问题转化为一个求解带约束的线性方程非负整数解个数的问题： $$ \\sum_{i=1}^6 x_i = 95 \\quad \\text{s.t.}\\ \\left\\{ \\begin{array}{l} x_1 \\ge 0 \\\\ x_2 \\ge 3 \\\\ x_3 \\ge 5 \\\\ x_4 \\ge 7 \\\\ x_5 \\ge 9 \\\\ x_6 \\ge 0 \\end{array} \\right. $$ 我们令： $$ \\left\\{ \\begin{array}{l} y_1 = x_1 \\\\ y_2 = x_2 - 3 \\\\ y_3 = x_3 - 5 \\\\ y_4 = x_4 - 7 \\\\ y_5 = x_5 - 9 \\\\ y_6 = x_6 \\end{array} \\right. $$ 则原问题转化为求解不带其他约束的线性方程非负整数解个数的问题： $$ \\sum_{i=1}^6 y_i = 95 - (3+5+7+9) = 71 $$ 通过可重组合计算得到： $$ \\bar{C}(6,71) = \\binom{6+71-1}{71} = \\binom{76}{71} = \\frac{76!}{71! \\cdot 5!} $$ 再将 f g h i j 这 5 种字母之间的区别纳入考虑，与方法一类似，最终结果为： $$ \\frac{76!}{71! \\cdot 5!} \\cdot \\frac{95!}{19!^5} = \\frac{76! \\cdot 95!}{5! \\cdot 19!^5 \\cdot 71!} $$"
  },
  "1.28": {
    "(1)": "右式中的每一项是一个可重组合 $\\bar{C}(m,k) = \\binom{m+k-1}{k} = \\binom{k+m-1}{m-1}$，其为下述线性方程非负整数解的数目： $$ \\sum_{i=1}^m x_i = k $$ 对 $k$ 从 0 到 $n$ 求和（即右式），其实就是求下述不等式非负整数解的数目： $$ \\sum_{i=1}^m x_i \\le n $$ 我们新增一个松弛变量 $x_{m+1}$，考虑下述线性方程： $$ \\sum_{i=1}^{m+1} x_i = n $$ 该线性方程的非负整数解和不等式的非负整数解是一一对应的，所以二者数目是相等的。而线性方程的非负整数解数目为 $\\bar{C}(m+1,n) = \\binom{m+1+n-1}{n} = \\binom{n+m}{n} = \\binom{n+m}{m}$，即左式。原式得证。"
  },
  "1.29": {
    "(1)": "### (1) 1. 4 个数均为正数，有 $\\binom{4}{4} = 1$ 种方案。 2. 4 个数 2 正 2 负，由乘法原理，有 $\\binom{4}{2} \\cdot \\binom{5}{2} = \\frac{4 \\cdot 3}{2 \\cdot 1} \\cdot \\frac{5 \\cdot 4}{2 \\cdot 1} = 60$ 种方案。 3. 4 个数均为负数，有 $\\binom{5}{4} = 5$ 种方案。 由加法原理，共有 $1+60+5 = 66$ 种方案。",
    "(2)": "### (2) 1. 4 个数均为正数，该问题是一个 $n=4, r=4$ 的可重组合问题，有 $\\bar{C}(4,4) = \\binom{4+4-1}{4} = \\binom{7}{4} = 35$ 种方案。 2. 4 个数 2 正 2 负，对于正数是一个 $n=4, r=2$ 的可重组合问题，对于负数是一个 $n=5, r=2$ 的可重组合问题，由乘法原理，有 $\\bar{C}(4,2)\\cdot\\bar{C}(5,2) = \\binom{4+2-1}{2}\\cdot\\binom{5+2-1}{2} = \\binom{5}{2}\\cdot\\binom{6}{2} = 10 \\cdot 15 = 150$ 种方案。 3. 4 个数均为负数，该问题是一个 $n=5, r=4$ 的可重组合问题，有 $\\bar{C}(5,4) = \\binom{5+4-1}{4} = \\binom{8}{4} = 70$ 种方案。 由加法原理，共有 $35+150+70 = 255$ 种方案。"
  },
  "1.30": {
    "(1)": "首先只考虑非负整数解。$1,000,000 = 2^6 \\cdot 5^6$，我们需要把它的质因数分配给 x y z。2 和 5 的分配情况完全相同，先考虑 2 的情况。将 6 个 2 分配给 3 个因数，等价于一个 $n=3, r=6$ 的可重组合问题，其方案数为 $\\bar{C}(3,6) = \\binom{3+6-1}{6} = \\binom{8}{6} = \\binom{8}{2} = \\frac{8 \\cdot 7}{2 \\cdot 1} = 28$。5 的情况完全相同，由乘法原理可得方案数（即非负整数解数目）为 $28^2 = 784$。 再考虑存在负数解的情况。将一组非负整数解中任意两个变量取负号，都可以得到一组合法的解，取负号的方案数为 $\\binom{3}{2} = 3$，故整数解数目为 $784 \\cdot (1+3) = 3136$。"
  },
  "1.31": {
    "(1)": "我们证明如下结论： $$ \\sum_{k=m}^n \\frac{k \\cdot P(n,k)}{n^{k+1}} = \\frac{P(n,m)}{n^m} $$ 其中 $1 \\le m \\le n$ 是正整数。对 $m$ 做归纳： 1. $m = n$ 时，$\\sum_{k=n}^n \\frac{k \\cdot P(n,k)}{n^{k+1}} = \\frac{n \\cdot P(n,n)}{n^{n+1}} = \\frac{P(n,n)}{n^n}$ 成立。 2. 假设 $m=m_0>1$ 时成立，考虑 $m=m_0-1$ 的情形： $$ \\begin{aligned} \\sum_{k=m}^n \\frac{k \\cdot P(n,k)}{n^{k+1}} &= \\sum_{k=m_0-1}^n \\frac{k \\cdot P(n,k)}{n^{k+1}} \\\\ &= \\frac{(m_0-1) \\cdot P(n,m_0-1)}{n^{m_0}} + \\sum_{k=m_0}^n \\frac{k \\cdot P(n,k)}{n^{k+1}} \\\\ &= \\frac{(m_0-1) \\cdot P(n,m_0-1)}{n^{m_0}} + \\frac{P(n,m_0)}{n^{m_0}} \\\\ &= \\frac{(m_0-1) \\cdot P(n,m_0-1)}{n^{m_0}} + \\frac{n!}{n^{m_0} \\cdot (n-m_0)!} \\\\ &= \\frac{(m_0-1) \\cdot P(n,m_0-1)}{n^{m_0}} + \\frac{(n-m_0+1) \\cdot n!}{n^{m_0} \\cdot (n-m_0+1)!} \\\\ &= \\frac{(m_0-1) \\cdot P(n,m_0-1)}{n^{m_0}} + \\frac{(n-m_0+1) \\cdot P(n,m_0-1)}{n^{m_0}} \\\\ &= \\frac{(m_0-1+n-m_0+1) \\cdot P(n,m_0-1)}{n^{m_0}} \\\\ &= \\frac{n \\cdot P(n,m_0-1)}{n^{m_0}} \\\\ &= \\frac{P(n,m_0-1)}{n^{m_0-1}} \\\\ &= \\frac{P(n,m)}{n^{m}} \\\\ \\end{aligned} $$ 成立。 归纳得证。取 $m=1$ 即得 $\\sum_{k=1}^n \\frac{k \\cdot P(n,k)}{n^{k+1}} = \\frac{P(n,1)}{n^1} = \\frac{n}{n} = 1$，原式得证。"
  },
  "1.32": {
    "(1)": "1. 因为除了 8 之外的数都比 8 小，所以 8 的中介数为 2，意味着 8 的后面有且仅有 2 个数字，即 8 排在倒数第 3 个位置。其他数字的排列对 8 的中介数没有影响。 2. 如果 7 排在 8 的后面，那么 7 的后面至多有 1 个数，和 7 的中介数为 3 矛盾，所以 7 排在 8 的前面。因为除了 7 和 8 之外的数都比 7 小，所以 7 的中介数为 2，意味着 7 的后面除了 8 之外有且仅有 3 个数字，即 7 排在倒数第 5 个位置（即第 4 个位置）。其他数字的排列对 7 的中介数没有影响。 3. 如果 5 排在 7 的后面，那么 5 的后面至多有 2 个小于 5 的数，和 5 的中介数为 3 矛盾，所以 5 排在 7 的前面。如果 5 排在第 1 个位置，那么 1～4 一定在 5 的后面，此时 5 的中介数为 4，矛盾。所以 5 的位置只有两种选择，下面我们对 5 的位置进行讨论，空位用 0 表示。 1. 5 排在第 3 个位置（00570800），需要从 1～4 中选出 3 个数排在 5 的后面，剩下的 2 个数字排在 5 的前面。由乘法原理，方案数为 $P(4,3) \\cdot P(2,2) = 24 \\cdot 2 = 48$。 2. 5 排在第 2 个位置（05070800），需要从 1～4 中选出 1 个数排在 5 的前面，剩下的 4 个数字排在 5 的后面。由乘法原理，方案数为 $P(4,1) \\cdot P(4,4) = 4 \\cdot 24 = 96$。 4. 由加法原理，方案总数为 $48+96 = 144$。"
  },
  "1.33": {
    "(1)": "从 $m$ 个盒子中选出 $n$ 个互不相邻的盒子，是一个 $n=m, r=n$ 的不相邻组合问题，共有 $\\binom{m-n+1}{n}$ 种选法。首先在这 $n$ 个盒子中各放入 $k$ 个球，再将剩余的 $r-nk$ 个相同的球分发到这些盒子中，这是一个 $n=n,r=r-nk$ 的可重组合问题，共有 $\\binom{n+r-nk-1}{r-nk}$ 种分发方法。由乘法原理，满足要求的放球方案数为 $\\binom{m-n+1}{n} \\cdot \\binom{n+r-nk-1}{r-nk}$。"
  },
  "1.34": {
    "(1)": "使用这些字母组成一个字符串，是一个多重全排列问题，总方案数为 $\\binom{n}{a_1\\ a_2\\ \\cdots\\ a_{26}}$。下面对 $n$ 的奇偶性进行讨论。 1. $n$ 为偶数，若可以组成回文串，则字符串中的每个字母都能在对称的位置找到相同的字母，所以 $a_k$ 均为偶数。考虑回文串的左半部分（右半部分由左半部分完全确定），其组成方式是一个多重全排列问题，总方案数为 $\\binom{n/2}{a_1/2\\ a_2/2\\ \\cdots\\ a_{26}/2}$。 2. $n$ 为奇数，若可以组成回文串，则除了字符串中间的那个字母，其余每个字母都能在对称的位置找到相同的字母，所以存在一个 $m \\in \\{1, 2, \\dots, 26\\}$，$a_m$ 为奇数，其余 $a_k$ 均为偶数。考虑回文串的左半部分（右半部分由左半部分完全确定，而且中间字母已经确定，一定为第 $m$ 种字母），其组成方式是一个多重全排列问题，总方案数为 $\\binom{(n-1)/2}{a_1/2\\ a_2/2\\ \\cdots\\ a_{m-1}/2\\ (a_m-1)/2\\ a_{m+1}/2\\ \\cdots\\ a_{26}/2}$。 综上，符合要求的字符串数目为： $$ \\left\\{ \\begin{array}{ll} \\binom{n}{a_1\\ a_2\\ \\cdots\\ a_{26}} - \\binom{n/2}{a_1/2\\ a_2/2\\ \\cdots\\ a_{26}/2}, &a_k\\text{ even} \\\\ \\binom{n}{a_1\\ a_2\\ \\cdots\\ a_{26}} - \\binom{(n-1)/2}{a_1/2\\ a_2/2\\ \\cdots\\ a_{m-1}/2\\ (a_m-1)/2\\ a_{m+1}/2\\ \\cdots\\ a_{26}/2}, &a_m\\text{ odd, others even} \\\\ \\binom{n}{a_1\\ a_2\\ \\cdots\\ a_{26}}, &\\text{otherwise} \\end{array} \\right. $$"
  },
  "1.35": {
    "(1)": "将三阶魔方的 8 个角块和 12 个棱块全部拆下之后，剩余的部分无论如何旋转，都是相同的状态；而将角块或棱块拼回到任何不同的位置，都对应不同的状态。所以三阶魔方的状态（包括合法和不合法）和角块、棱块的拼回方法是一一对应的，二者数目相同。 每个角块有 3 种旋转方法，考虑位置和旋转，由乘法原理，8 个角块的拼法有 $P(8,8)\\cdot3^8 = 8!\\cdot3^8$ 种；每个棱块有 2 种旋转方法，考虑位置和旋转，由乘法原理，12 个棱块的拼法有 $P(12,12)\\cdot2^{12} = 12!\\cdot2^{12}$ 种。由乘法原理，所有块拼回方法有 $8! \\cdot 3^8 \\cdot 12! \\cdot 2^{12}$ 种，对应三阶魔方的状态数目为 $8! \\cdot 3^8 \\cdot 12! \\cdot 2^{12}$ 根据题意，这些状态中应有 $\\frac{1}{12}$ 是合法的，因此合法状态数目为 $8! \\cdot 3^8 \\cdot 12! \\cdot 2^{12} \\cdot \\frac{1}{12} = 8! \\cdot 3^7 \\cdot 12! \\cdot 2^{10}$。"
  },
  "1.36": {
    "(1)": "### (1) 由于 4 个选项是不同的，而 147 位同学在统计结果中是等同的，所以该问题是一个 $n=4,r=147$ 的可重组合问题。可能出现的统计结果数目为 $\\bar{C}(4,147) = \\binom{4+147-1}{147} = \\binom{150}{147} = 551,300$。",
    "(2)": "### (2) 对于没有回答此题的同学，可以认为他们选择了一个虚空选项 E，该问题转化为一个 $n=5, r=147$ 的可重组合问题。可能出现的统计结果数目为 $\\bar{C}(5,147) = \\binom{5+147-1}{147} = \\binom{151}{147} = 20,811,575$。",
    "(3)": "### (3) 对于没有回答此题的同学，可以认为他们选择了一个虚空选项 E。为了使此题算分，选择正确答案 C 的同学应达到 $\\lceil\\frac{147}{2}\\rceil = 74$ 人。从统计结果中去掉选择 C 的 74 人，还剩 $147-74=73$ 人，可能选择 A～E 中的任一选项。该问题转化为一个 $n=5,r=73$ 的可重组合问题。可能出现的统计结果数目为 $\\bar{C}(5,73) = \\binom{5+73-1}{73} = \\binom{77}{73} = 1,353,275$。"
  }
}