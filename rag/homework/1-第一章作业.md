该文件对应教材第一章的作业，主要知识点是教材中各类排列组合的典型问题。
包括，圆桌问题，求和公式的计算，指数值的公因数求解，某数字出现的次数，小球入盒问题及其变种，格路问题等。
# 1.1

**$𝑚$ 个男生和 $𝑛$ 个女生排成一行 ( $𝑚, 𝑛$ 均为正整数)**

**(1) 任何两个男生不相邻 (𝑚 ≤ n + 1)**

那么说明任意两个男生中间一定存在一个女生，也就是男生一定是在女生的空隙中排列的。n个女生，产生了$n+1$个可选的空位，那么方案数为：
$$P(n+1,m)\times n!=\frac{(n+1)!n!}{(n+1-m)!}$$
其中$n!$是女生的全排列方式
**(2) $n$ 个女生形成一个整体(即任何两个女生之间没有男生)**
$n$个女生形成一个整体，和$m$个男生进行全排列，再考虑$n$个女生之间的全排列，那么结果为$$(m+1)!\times n!$$


**(3) 男生 A 和女生 B 相邻**
即指定了两个特殊的人，剩下$(n-1)$个女生和$(m-1)$个男生都是相同的，那么相当于共$(n-1)+(m-1)+1$个单元进行全排列，然后考虑$A$与$B$的全排列，即：
$$2!\times (n+m-1)!=2\times (n+m-1)!$$

# 1.2
**6 个男生和 5 个女生围在一圆桌旁，若**
**(1) 任何两个女生不相邻；**
即女生在男生的空隙中坐下，那么6个男生围成一个圆时，有6个空位，即女生可以在这六个空位中找位置坐下。


> **圆桌问题的理解**
> 当圆桌中存在一个观察点的时候，剩下的人进行线状的全排列，对于观察点来说就将所有可能的落座方式全部遍历了。也就是从外者的视角来看，会因为旋转带来的重复而导致问题复杂化，但是当作为其中任何一个人的时候，问题就很简单。同时观察点本身就是参与者，所以不同观察者之间并不会产生乘法原理。


先选定任一个男生作为观察者，那么剩下的男生先排好位置，女生在剩下的六个空位中进行排列即可。

即$$ P(5,5)\times P(6,5)=5! \times 6!= 120\times 720=86400$$
**(2) 所有女生形成一个整体；**
那么共有$6+1=7$个排列单元。那么考虑女生内部的线性排序，共有：
$$
6!\times 5!=86400
$$

**(3) 女生 A 两侧均是男生**
A和其两侧的男生构成一个单元，该单元构成一个观察点。剩下的4个男生和4个女生为8个单元。
即
$$P(6,2)\times P(8,8)=6\times5\times8!=1209600$$


同样可以拓展到同1.1的$m$个男生和$n$个女生，对应的答案分别为：

- 1) $P(m-1,m-1)\times P(m,n)$
- 2) $P(n,n)\times P(m,m)$
- 3) $P(m,2)\times P(m+n-3,m+n-3)$


# 1.3
**计算**

$$\sum_{k=1}^nk\cdot k!=1\cdot1!+2\cdot2!+\cdots+n\cdot n!$$


子项展开：


$$k\cdot k!=(k+1-1)\cdot k!=(k+1)!-k!$$


那么原式可以改写为：

$$\begin{align}
\sum_{k = 1}^nk\cdot k! & = 1\cdot1!+2\cdot2!+\cdots+n\cdot n!\\\\
&=2!-1!+3!-2!+4!-3!+\cdots+(n+1)!-n!\\\\
&=(n+1)!-1
\end{align}$$


# 1.4

**求 $10^{40}$  与 $20^{30}$ 的公因数的数目**


分别将 $10,20$ 进行因式分解，得到


$$
\begin{align}
10&=2\times5\\\\
20&=2\times 2 \times 5
\end{align}
$$


那么得到，两者的公因数最多由40个2和30个5组成，即 

$$x_{ij}=2^i5^j|_{i\le 40,j\le 30}$$ 


满足条件的任意 $i,j$ 都构成一个公因数 $x_{ij}$ 。
所以有公因数 $41\times 31=1271$ 个。

# 1.5

**求从 1 到 1000000 的整数的十进制表示中，数字 0 出现的总次数**

可以分不同的位数进行分类讨论
一位数字，没有0出现
两位数字，$1\times 9$，最多一个0
三位数字，$1\times 9 \times 9 \times2+2\times 9$ ，出现1个0，2个0
四位数字，$1\times 9\times 9\times9 \times 3+2\times C(3,2) \times 9\times 9+3\times 9$ ，最多出现3个0

其实这里规律已经总结出来了，对于 $n,n\ge2$ 位数字，其中0的个数为：


$$
\sum^{n-1}_{i=1}{i\times9^{n-i}\times C(n-1,i)}
$$


那么针对该题，可以列式为


$$
N=0+\sum_{n=2}^{6}{\sum^{n-1}_{i=1}{i\times9^{n-i}\times C(n-1,i)}}+6
$$


0为1位数字，6为1000000中0的个数。


$$
\begin{aligned}
N&=\\\\
&0\\\\
&+(1\times9)\\\\
&+(1\times9^2\times C_2^1+2\times9\times C_2^2)\\\\
&+(1\times9^3\times C^1_3+2\times9^2\times C_3^2+3\times9\times C_3^3)\\\\
&+(1+9^4\times C_4^1+2\times9^3\times C_4^2+3\times9^2\times C_4^3+4\times9 \times C^4_4)\\\\
&+(1\times9^5\times C_5^1+2\times9^4 \times C_5^2+3\times9^3\times C_5^3+4\times9^2\times C_5^4+5\times9\times C_5^5)\\\\
&+6\\\\
&=9+180+2700+36000+450000+6=488\ 895
\end{aligned}$$


# 1.6
**将 n 个相同的小球放入 r 个不同的盒子$(n \ge r)$，禁止出现空盒，求方案数**

**思路1：**
相当于$n$个小球排成一排，又因为不能有空盒子出现，那么盒子相当于隔板的话，只有$n-1$个位置可以选择，且放入$r-1$个隔板，即：


$$C(n-1,r-1)=\frac{(n-1)!}{(n-r)!r!}$$


**思路2：**
因为小球完全相同，那么当不出现空盒的时候，如果所有盒子都相同的减去一个球，原有的方案数还是保持不变。
所以可以直接每个盒子先放入一个球，剩下的球再进行可为零的随机分配。那么相当于排队隔板法来理解： $n-r$ 个小球和 $r-1$ 个隔板进行分割，一共多少种这种分割方式。
因为所有小球都是相同的，那么对于一共$n-r+r-1$位置，只需要隔板进行选择即可，所以方案数为：


$$
C(n-r+r-1,r-1)=C(n-1,r-1)
$$
**思路3：**
原本的隔板是方程非负整数解个数的问题。该问题可转化为方程组解的个数问题。

$$
x_1+x_2+\cdots+x_r=n
$$

非零解的可能性为

$$
\frac{P(r-1+n,r-1+n)}{P(r-1,r-1)\times P(n,n)}=C(n-1.r-1)
$$

> 这里是，将盒子逐一排开 (这一过程就表示了盒子是不同的) ，将 (盒子数-1) 的隔板与小球一同进行全排列，隔板是完全相同的，小球是完全相同的，然后一同进行全排列，再除去小球与隔板的重复关系，得到了和盒子逐一对应的方案。
> 其实隔板法本身就代表了一种顺序。


这里令

$$
y=x-1
$$

即可解



# 1.7
**将 $n$ 个相同的小球放入 $r$ 个不同的盒子中，每盒中至少 $k$ 个球（$n \ge rk$），求方案数**

采取1.6的第二种思路更加容易：


$$
C(n-rk+r-1,r-1)
$$


# 1.8
**8 个盒子排成一列，将 5 个不同的小球放入这些盒子，要求空盒不相邻，求方案数．**

什么情况下能够让空盒不相邻，只有两种，就是非空盒之间的空位，一定大于空盒的个数。
假设非空盒有$k$个，那么能形成$k+1$个空位，也就是$k+1>n-k$ ，所以对于8个盒子，五个小球，只有,$k>3.5$：
1. 5个球放入4个盒子，然后有球的4个盒子构成5空隙给4个空盒


$$\frac{A(5,5)\times C(4,3)}{A(2,2)} \times C(5,4)=\frac{5!\times4}{2}\times5=120\times 2\times5=1200$$


2. 5个球放入5个盒子，然后有球的5个盒子构成6个空隙给3个空盒


$$
A(5,5)\times C(4,4) \times C(6,3)=5!\times1\times \frac{6!}{(6-3)!3!}=120\times20=2400
$$


所以一共为$$1200+2400=3600$$

# 1.9
**设 $A = \{(a, b) \ | \ a, b \in Z, 0 \le a \le 9, 0 \le b \le 5\}$．**


**(1) 求 $xOy$ 平面上以 $A$ 中的点为四个顶点、四边与坐标轴平行的长方形数目**

即，水平有10种选择，竖直方向有6种取值，那么分别水平方向取两个点，竖直方向取两个点


$$
C(10,2)\times C(6,2)=(10\times 9\div 2)\times(6\times5\div 2)=45\times15=675
$$


**(2) 求 $xOy$ 平面上以 $A$ 中的点为四个顶点、四边与坐标轴平行的正方形数目**

也就是说，其实当横平或者竖直的方向，有一个边确定的时候，正方形就大小确定了。
在大小确定后，正方形可以在水平方向和竖直方向上滑动，假设$i$为正方形边长，那么水平方向有$(10-i)$种滑动，竖直方向有$(6-i)$种滑动，那么按照正方形边长遍历的计算式应该为：


$$
\sum_{i=1}^{5}(6-i)(10-i)=115
$$


# 1.10
**分别求从如下多重集中选取 $n$ 个元素的方案数**


**(1) 大小为$2n$的多重集$\{n\cdot 0,1,2,\cdots,n\}$;**


选取$n$个元素，那么需要考虑取了多少个0


$$
S_1=\sum_{i=0}^{i=n}{C(n,n-i)}=\sum_{k=0}^{n}{C(n,k)}=(1+x)^n|_{x=1}=2^n
$$


**(2) 大小为$3n+1$的多重集$\{n\cdot 0,1,2,\cdots,2n+1\}$.


$$
S_2=\sum_{i=0}^{n}{C(2n+1,n-i)}=\sum_{i=0}^{n}{C(2n+1,n+1+i)}=S_2^*
$$


把$S_2$和$S_2^*$分开写，可以得到：


$$
\begin{align}
S_2&=C(2n+1,0)+C(2n+1,1)+\cdots+C(2n+1,n)\\\\
S_2^* &=C(2n+1,n+1)+C(2n+1,n+2)+\cdots+C(2n+1,2n+1)
\end{align}
$$


那么可以发现，当两者相加的时候，得到了可以计算的值，即：


$$
S_2=\frac{1}{2}(S_2+S_2^*)=\frac{1}{2}\sum_{i=0}^{2n+1}C(2n+1,i)=2^{-1}\times (1+x)^{2n+1}|_{x=1}=2^{2n}=4^n
$$

# 1.11

**5 台教学机器编号为 1, 2, 3, 4, 5，分配给 $m$ 名学生使用，使用第 1 台和第 2 台的人数 相等，求分配方案数．**


机器是不同的，学生也是不同的（默认人和人是不一样的）。那么相当于将$m$个相同的小球放进五个不同的盒子中，其中1号盒子和2号盒子的小球数量相等。
那么可以按照1，2号机器分配的学生数进行分类，假设分了$i$个同学到1和2，那么$i$的取值为$[0,\lfloor m/2\rfloor]$ 。剩下的因为可以有多个空余的机器，相当于乘法法则。那么计算公式为


$$
\sum_{i=0}^{\lfloor \frac{m}{2} \rfloor}{C(m,i)C(m-i,i)\times 3^{m-2i}}
$$


# 1.12
**由 $n$ 个 $0$ 和 $n$ 个 $1$ 构成的 $2n$ 位二进制串，要求任意前 $k$ 位中 $0$ 的数目不少于 $1$ 的数目（$1 \le k \le 2n$），求满足要求的二进制串的数目。**
从网格法的想法来讲，如果是0，那么沿x轴前进一步，如果是1，沿竖直方向前进一步。
那么题相当于为，从$(0,0)$出发，到达$(n,n)$点的过程中，不穿越线$y=x$。
那么等价于，从$(0,0)$出发，到达$(n,n)$点的过程中，不接触线$y=x-1$。

那么问题相当于，“所有方法”-“一定接触的方法”。问题变换为求解一定接触的方法。我们将$(0,0)$点关于$y=x-1$对称得到点$(1,-1)$，那么方案数为：


$$
\begin{align}
C(2n,n)-C(n-1+n+1,n-1)&=C(2n,n)-C(2n,n-1)=\frac{C(2n,n)\times C(n,1)}{C(n,1)}-C(2n,n-1)\\\\
&=\frac{C(2n,n-1)\times C(n+1,1)}{C(n,1)}-C(2n,n-1)\\\\
&=C(2n,n-1)\times (\frac{n+1}{n}-1)\\\\
&=\frac{C(2n,n-1)}{n}
\end{align}
$$

第三个等号的依据是，从$2n$个中取出 $n-1$ 和 $1$ 两组的两种取法：

- 先取 $n$ 个，然后在 $n$ 个中取1个
- 先取 $n-1$ 个，然后在剩下的 $n+1$ 个中取1个

> 格路问题:
> 从$(a,b)$到达右上方的$(c,d)$，一共有多少种由横平竖直的路径构成的走法
> 一共一定是走$(c-a+d-b)$步，其时间上的先后自然的进行了排序。那么我们只需要从这$[1,c-a+d-b]$步中，取$(c-a)$步即可。即$$C(c-a+d-b,c-a)$$

