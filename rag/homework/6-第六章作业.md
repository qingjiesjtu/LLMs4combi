该文件主要为容斥原理在题目中的应用。
# 6.1
(1) $C_{n-m}^{n-k}=\sum_{j=0}^{m}(-1)^jC_{m}^{j}C_{n-j}^{k}$
(2) $C^{m-1}_{n-1}=\sum_{j=0}^{m}(-1)^jC_{m}^{j}C_{n+m-j-1}^{n}$
(3) $C^{n-1}_{n+m-1}=\sum_{j=0}^{m}(-1)^jC_{n+m}^{n+j}$

解：
**（1）**
左侧式子，$$C_{n-m}^{n-k}=C_{n-m}^{k-m}$$
为从$n-m$个物体中，取出$k-m$个物体，也就是，从n个物体中取出k个，其中包含m个指定的元素$b_1,b_2,\cdots,b_m$。

该场景下，解释右侧式子，右侧式子第一项为：
$$
C_{m}^{0}C_{n}^{k}=C_{n}^{k}
$$
为直接从n个物体中取出k个的总方案数。

因为需要包括m个指定元素中的任何一个，假设包含$b_i$元素的方案集合为$B_i$,那么包含所有元素的集合能够用包含任一元素的方案集合表示
$$
|B_1 \cap B_2\cap B_3 \cap \cdots\cap B_m|
$$
根据容斥原理，我们能够得到该集合可以用以下式子求解
$$
\begin{align}
&|B_1 \cap B_2\cap B_3 \cap \cdots\cap B_m|
\\=&|S|-\sum_{i}{|\bar{B_i}|}+\sum_{i,j}{|\bar{B_i}\cap \bar{B_j}|}-\cdots
\\=&C_{n}^{k}-C_{m}^{1}C_{n-1}^{k}+C_{m}^{2}C_{n-2}^{k}-\cdots
\\=&\sum_{j=0}^{m}(-1)^jC_{m}^{j}C_{n-j}^{k} 
\end{align}
$$
**（2）**
$$C^{m-1}_{n-1}=\sum_{j=0}^{m}(-1)^jC_{m}^{j}C_{n+m-j-1}^{n}$$
等式左侧为，共有n个球，球之间没有区别，将球放入m个不同的盒子中，且不能空盒。

假设第i个盒子为空，那么方案数可以表示为$B_i$
那么等式左侧的方案可以表示为：
$$
|\bar{B}_1\cap \bar{B}_2\cap \cdots \bar{B}_m|
$$
根据容斥原理，有：
$$
\begin{align}
&|\bar{B}_1\cap \bar{B}_2\cap \cdots \bar{B}_m|\\
=&|S|-\sum_{i}{|B_i|}+\sum_{i,j}{|B_i\cap B_j|}-\cdots \\
=&C_{n+m-1}^{n}-C_{m}^{1}C_{n+m-2}^{n}+\cdots\\
=&\sum_{j=0}^{m}(-1)^jC_{m}^{j}C_{n+m-j-1}^{n}
\end{align}
$$

> 为了将 n 个球放入 m 个盒子，我们需要在 n 个球之间插入 m−1 个条（用于分隔盒子）。这个问题可以转换为从 n+m−1 个位置中选择 m−1 个位置来放置条，其余位置放置球。

**（3）**
$$
C^{n-1}_{n+m-1}=\sum_{j=0}^{m}(-1)^jC_{n+m}^{n+j}
$$

等式左侧为从n+m个球中选出n个球，其中1个球为指定的球，左式可以表示为n+m个球中选出n个-选出n个中不含指定球：

$$
C^{n-1}_{n+m-1}=C^{n}_{n+m}-C_{n+m-1}^{n}
$$
可以发现出现了右侧的式子，那么可以迭代得到
$$
C_{n+m-1}^{n+k-1}=C_{n+m}^{n+k}-C_{n+m-1}^{n+k}
$$
迭代可以得到：
$$
C^{n-1}_{n+m-1}=\sum_{j=0}^{m}(-1)^jC_{n+m}^{n+j}
$$

# 6.2 
考虑 $\{3\cdot a, 3\cdot b,3\cdot c\}$的多重排列
(1) 若任何连续3个元素不能全相同，求满足要求的排列数目
(2) 若任何相邻2个元素不能相同，求满足要求的排列数目

解：
**（1）**
3a连续出现，共$\frac{7!}{3!3!}=140$;
3a,3b同时连续出现，共$\frac{5!}{3!}=20$;
3a,3b,3c同时连续出现，共$3!=6$;
全部的排列数为，$\frac{9!}{3!3!3!}=1680$
所以根据容斥原理，计算为：
$$1680-3\times 140+3\times 20 -6=1314$$
**（2）**
1. 至少出现两个a连续出现的种类为，$\frac{8!}{3!3!}-\frac{7!}{3!3!}=980$，这里在aa,a内部使用了一次容斥
2. 至少出现两个连续的a和两个连续的b的种类，需要考虑重复计算的情况即aa和a组成三连A（同时存在至少两个b连续）的重复以及bb与b组成三联B（同时存在至少两个a连续）的重复，两者取并集的集合$A\cup B$需要被减去。$\frac{7!}{3!}-|A\cup B|=\frac{7!}{3!}-(\frac{6!}{3!}+\frac{6!}{3!}-\frac{5!}{3!})=620$
3. 至少存在两个aa,bb,cc同时出现，同2，为$6!-|A\cup B\cup C|=6!-(3\times 5! -3\times 4! +3!)=426$
综上，再使用一次容斥：
$$
9!-3\times 980+3\times 620-426=174
$$


# 6.3
求方程
$$
x_1+x_2+x_3=40 , (6\le x_1\le 15, 5\le x_2\le 20, 10\le x_3 \le 25 )
$$
解：
使用栅格的思路，先将固定存在的减去。
x1至少有6，x2至少有5，x3至少有10

那么等价于：
$$
x_1+x_2+x_3=19, (0\le x_1\le 9, 0\le x_2\le 15, 0\le x_3 \le 15 )
$$
在没有约束的条件下，解的个数就是可以空盒的放球方案数：
$$C_{19+3-1}^{3-1}=210$$
那么不满足x1的条件的方案（即x1大于等于10）数为：
$$
C_{19+3-1-10}^{3-1}=55
$$
同理,不满足x2的方案数为$C_{19+3-1-16}^{3-1}=10$，不满足x3的方案数为$C_{19+3-1-16}^{3-1}=10$，不存在任何两种及以上条件同时不满足的情况。
那么根据容斥原理，有：
$$
210-(55+10+10)=135
$$
